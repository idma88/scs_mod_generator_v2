function getDLCList(e){$.ajax({cache:!1,dataType:"json",type:"POST",data:{_token:$("input[name=_token]").val(),target:$("input[name=target]").val(),accessory:e,chassis:$("select[name=chassis]").val()},success:function(e){$("[id^=dlc_]").prop("checked",!1).prop("disabled",!1),$.each(e.dlc,function(e,t){$("#dlc_"+t).prop("checked",!0).prop("disabled",!0)})}})}function showColors(e){e.length>0&&(e=e.split("/")),"default.sii"===e[e.length-1]?$(".colors").show():$(".colors").hide()}function setColors(e,t,a){$("#color_palette").val(e),$("#color_hex").val(e),$("#color_rgb_r").val(t.r),$("#color_rgb_g").val(t.g),$("#color_rgb_b").val(t.b),$("#color_scs_r").val(parseFloat(a.r.toFixed(4))),$("#color_scs_g").val(parseFloat(a.g.toFixed(4))),$("#color_scs_b").val(parseFloat(a.b.toFixed(4)))}function rgbToHex(e,t,a){return"#"+componentToHex(e)+componentToHex(t)+componentToHex(a)}function componentToHex(e){var t=e.toString(16);return 1==t.length?"0"+t:t}function hexToRgb(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function rgbToScs(e,t,a){return{r:Math.pow(e/255,2),g:Math.pow(t/255,2),b:Math.pow(a/255,2)}}function getCookie(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}function setCookie(e,t,a){var o=(a=a||{}).expires;if("number"==typeof o&&o){var l=new Date;l.setTime(l.getTime()+1e3*o),o=a.expires=l}o&&o.toUTCString&&(a.expires=o.toUTCString());var r=e+"="+(t=encodeURIComponent(t));for(var c in a){r+="; "+c;var s=a[c];!0!==s&&(r+="="+s)}document.cookie=r}function getPreloaderHtml(e,t){return void 0===e&&(e=""),void 0===t&&(t="spinner-red-only"),'<div class="preloader-wrapper active '+e+'"><div class="spinner-layer '+t+'"><div class="circle-clipper left"><div class="circle"></div></div><div class="gap-patch"><div class="circle"></div></div><div class="circle-clipper right"><div class="circle"></div></div></div></div>'}$(document).ready(function(){for(var e,t=document.querySelectorAll(".mdc-ripple:not([data-no-js])"),a=0;e=t[a];a++)mdc.ripple.MDCRipple.attachTo(e);var o=document.querySelector("#mdc-dialog-how-to");if(null!==o){var l=new mdc.dialog.MDCDialog(o);$("#how-to").click(function(){l.show()})}var r=document.querySelector("#mdc-dialog-lang");if(null!==r){var c=new mdc.dialog.MDCDialog(r);$("#lang-sw").click(function(){c.show()})}var s,i=document.querySelectorAll(".mdc-text-field:not([data-demo-no-auto-js])");for(a=0;s=i[a];a++)mdc.textField.MDCTextField.attachTo(s);$("#toggle-dark").change(function(){this.checked?($("body").addClass("mdc-theme--dark"),setCookie("dark_theme","true",{expires:31536e3,path:"/"})):($("body").removeClass("mdc-theme--dark"),setCookie("dark_theme","true",{expires:-1}))}),$(".tooltipped").tooltip({position:"left",exitDelay:200}),$(".wheels select").formSelect(),$(".tabs").tabs(),$(".collapsible").collapsible(),$(".sidenav").sidenav(),$(".show-skin").collapsible({onOpenStart:function(){var e=$(this)[0].$el;$.ajax({cache:!1,dataType:"json",type:"POST",data:{_token:e.data("token"),target:e.data("game"),chassis:e.data("trailer")},beforeSend:function(){e.find(".collapsible-header").append(getPreloaderHtml("tiny"))},success:function(t){if("OK"===t.status){var a='<ul class="ac-list browser-default">';$.each(t.result,function(e,t){0!==e&&(a+="<li>"+t.name+"</li>")}),a+="</ul>",e.find(".collapsible-body").append(a)}},complete:function(){$(".preloader-wrapper").remove()}})},onCloseEnd:function(){$(this)[0].$el.find(".ac-list").remove()}}),$(".lang-btn").click(function(){setCookie("lang",$(this).data("lang"),{expires:31536e3})}),$("#color-select-chassis").uidropdown({fullTextSearch:!0,duration:300,placeholder:!1,forceSelection:!1,onChange:function(e,t,a){$("#generate-color-btn").attr("disabled",""===e),$("[id^=dlc_]").prop("checked",!1).prop("disabled",!1),""!==e&&$.ajax({cache:!1,dataType:"json",type:"POST",data:{_token:$("input[name=_token]").val(),target:$("input[name=target]").val(),chassis:e},success:function(e){"OK"===e.status&&($.each(e.dlc,function(e,t){$("#dlc_"+t).prop("checked",!0).prop("disabled",!0)}),e.wheels?$(".wheels.input-field").show():($(".wheels.input-field").hide(),$(".wheels.input-field select").val("")))}})}}),$("#advanced_color").change(function(){this.checked?$(".color-advanced").show():$(".color-advanced").hide()}),$("#select-chassis").uidropdown({fullTextSearch:!0,duration:300,placeholder:!1,forceSelection:!1,onChange:function(e,t,a){$("#accessory").hide().find(".ui.search").remove(),$("#paint").hide().find(".ui.search").remove(),$(".colors").hide(),$("#all_accessories, #all_paints").prop("checked",!1),$("[id^=dlc_]").prop("checked",!1).prop("disabled",!1),$("#generate-btn").attr("disabled",!0),""!==e&&($("#generate-btn").attr("disabled",!1),"schw_overweight"!==e&&-1===e.indexOf("goldhofer")?$(".wheels.input-field").show():($(".wheels.input-field").hide(),$(".wheels.input-field select").val("")),$.ajax({cache:!1,dataType:"json",type:"POST",data:{_token:$("input[name=_token]").val(),target:$("input[name=target]").val(),chassis:e},beforeSend:function(){$("#chassis").after(getPreloaderHtml("small"))},success:function(e){"OK"===e.status&&($.each(e.result,function(e,t){var a=$('<select class="browser-default ui search dropdown '+e+'" name="'+e+'"></select>');$.each(t.echo,function(e,t){var o='<option value="'+t.value+'"';t.selected&&(o+=" selected"),o+=">"+t.name+"</option>",a.append(o)}),$("#"+e).show().find("label.for-select").after(a),a.uidropdown({fullTextSearch:!0,duration:300,placeholder:!1,forceSelection:!1,onChange:function(e,t,a){getDLCList(e),"default.sii"===(e=e.split("/"))[e.length-1]||"default"===e[e.length-1]?$(".colors").show():$(".colors").hide()}})}),$.each(e.dlc,function(e,t){$("#dlc_"+t).prop("checked",!0).prop("disabled",!0)}),e.wheels?$(".wheels.input-field").show():($(".wheels.input-field").hide(),$(".wheels.input-field select").val("")))},complete:function(){$(".preloader-wrapper").remove()}}))}}),$("form").submit(function(){""===$("input[name=title]").val()&&$("input[name=title]").val($("select[name=chassis] option:selected").text().replace(/(\s\s.+)/,"").trim())}),$("#all_accessories, #all_paints").change(function(){getDLCList(""),$(".colors").hide();var e=$(this).data("target");$.ajax({cache:!1,dataType:"json",type:"POST",data:{_token:$("input[name=_token]").val(),target:$("input[name=target]").val(),all:$(this)[0].checked,select:e,chassis:$("select[name=chassis]").val()},beforeSend:function(){$("#"+$(this).data("target")+" h5").append(getPreloaderHtml("tiny"))},success:function(t){"OK"===t.status&&($.each(t.result,function(t,a){if(t===e){$("#"+t).find(".ui.search").remove();var o=$('<select class="browser-default ui search dropdown '+e+'" name="'+e+'"></select>');$.each(a.echo,function(e,t){var a='<option value="'+t.value+'"';t.selected&&(a+=" selected"),a+=">"+t.name+"</option>",o.append(a)}),$("#"+t).show().find("label.for-select").after(o),o.uidropdown({fullTextSearch:!0,duration:300,placeholder:!1,forceSelection:!1,onChange:function(e,t,a){getDLCList(e),showColors(e)}})}}),showColors($("#paint").find("select").val()))},complete:function(){$(".preloader-wrapper").remove()}})}),$(".colors input[type=color]").change(function(){var e=hexToRgb($(this).val()),t=rgbToScs(e.r,e.g,e.b);setColors($(this).val(),e,t)}),$("#color_hex").keyup(function(){var e=$(this).val();if(""!==e&&new RegExp("^#?[A-Fa-f0-9]{6}$").test(e)){var t=e.replace("#",""),a=hexToRgb(t);setColors("#"+t,a,rgbToScs(a.r,a.g,a.b))}}),$("#color_rgb_b, #color_rgb_g, #color_rgb_r").keyup(function(){var e=$(this).val().replace(/\D/g,"");if($(this).val(e),e=parseInt(e),!isNaN(e))if(e>255)$(this).val(255),$(this).trigger("keyup");else{var t={r:parseInt($("#color_rgb_r").val()),g:parseInt($("#color_rgb_g").val()),b:parseInt($("#color_rgb_b").val())};setColors(rgbToHex(t.r,t.g,t.b),t,rgbToScs(t.r,t.g,t.b))}}),$("#color_scs_b, #color_scs_g, #color_scs_r").keyup(function(){var e=$(this).val().replace(/,/g,".").replace(/\.+/g,".").replace(/[^\d|\.]/g,"");if($(this).val(e),e=parseFloat(e),!isNaN(e))if(e>1)$(this).val(1),$(this).trigger("keyup");else{var t={r:parseFloat($("#color_scs_r").val()),g:parseFloat($("#color_scs_g").val()),b:parseFloat($("#color_scs_b").val())},a={r:Math.round(255*Math.sqrt(t.r)),g:Math.round(255*Math.sqrt(t.g)),b:Math.round(255*Math.sqrt(t.b))},o=rgbToHex(a.r,a.g,a.b);$("#color_palette").val(o),$("#color_hex").val(o),$("#color_rgb_r").val(a.r),$("#color_rgb_g").val(a.g),$("#color_rgb_b").val(a.b)}}),$("#weight").keyup(function(){var e=$(this).val(),t=$(this).val();new RegExp("^d*$").test(e)||(t=e.replace(/\D/,""),$(this).val(t)),t.length>3?$(this).val(t.substr(0,3)):parseInt(t)>300&&$(this).val(t.substr(0,2))}),$("#image").change(function(){var e=window.URL||window.webkitURL;if(this.files[0].size>55e5)return alert($(this).data("size")),$(this).val(""),!1;var t,a,o=$(this).data("dimensions");(t=this.files[0])&&((a=new Image).src=e.createObjectURL(t),a.onload=function(){if(this.width>3e3||this.height>3e3)return alert(o),$("#image").val(""),$("#image-path").val(""),!1})})});