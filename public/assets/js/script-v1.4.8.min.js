function getDLCList(e){$.ajax({cache:!1,dataType:"json",type:"POST",data:{ajax:!0,target:$("input[name=target]").val(),accessory:e,chassis:$("select[name=chassis]").val()},success:function(e){$("[id^=dlc_]").prop("checked",!1).prop("disabled",!1),$.each(e.dlc,function(e,a){$("#dlc_"+a).prop("checked",!0).prop("disabled",!0)})}})}function showColors(e){e.length>0&&(e=e.split("/")),"default.sii"===e[e.length-1]?$(".colors").show():$(".colors").hide()}function setColors(e,a,t){$("#color_palette").val(e),$("#color_hex").val(e),$("#color_rgb_r").val(a.r),$("#color_rgb_g").val(a.g),$("#color_rgb_b").val(a.b),$("#color_scs_r").val(parseFloat(t.r.toFixed(4))),$("#color_scs_g").val(parseFloat(t.g.toFixed(4))),$("#color_scs_b").val(parseFloat(t.b.toFixed(4)))}function rgbToHex(e,a,t){return"#"+componentToHex(e)+componentToHex(a)+componentToHex(t)}function componentToHex(e){var a=e.toString(16);return 1==a.length?"0"+a:a}function hexToRgb(e){var a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return a?{r:parseInt(a[1],16),g:parseInt(a[2],16),b:parseInt(a[3],16)}:null}function rgbToScs(e,a,t){return{r:Math.pow(e/255,2),g:Math.pow(a/255,2),b:Math.pow(t/255,2)}}function getCookie(e){var a=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return a?decodeURIComponent(a[1]):void 0}function setCookie(e,a,t){var o=(t=t||{}).expires;if("number"==typeof o&&o){var r=new Date;r.setTime(r.getTime()+1e3*o),o=t.expires=r}o&&o.toUTCString&&(t.expires=o.toUTCString());var l=e+"="+(a=encodeURIComponent(a));for(var c in t){l+="; "+c;var i=t[c];!0!==i&&(l+="="+i)}document.cookie=l}function getPreloaderHtml(e,a){return void 0===e&&(e=""),void 0===a&&(a="spinner-red-only"),'<div class="preloader-wrapper active '+e+'"><div class="spinner-layer '+a+'"><div class="circle-clipper left"><div class="circle"></div></div><div class="gap-patch"><div class="circle"></div></div><div class="circle-clipper right"><div class="circle"></div></div></div></div>'}$(document).ready(function(){for(var e,a=document.querySelectorAll(".mdc-ripple:not([data-no-js])"),t=0;e=a[t];t++)mdc.ripple.MDCRipple.attachTo(e);var o=document.querySelector("#mdc-dialog-how-to");if(null!==o){var r=new mdc.dialog.MDCDialog(o);$("#how-to").click(function(){r.show()})}var l=document.querySelector("#mdc-dialog-lang");if(null!==l){var c=new mdc.dialog.MDCDialog(l);$("#lang-sw").click(function(){c.show()})}var i,s=document.querySelectorAll(".mdc-text-field:not([data-demo-no-auto-js])");for(t=0;i=s[t];t++)mdc.textField.MDCTextField.attachTo(i);$("#toggle-dark").change(function(){this.checked?($("body").addClass("mdc-theme--dark"),setCookie("dark_theme","true",{expires:31536e3})):($("body").removeClass("mdc-theme--dark"),setCookie("dark_theme","true",{expires:-1}))}),$(".tooltipped").tooltip({position:"left",exitDelay:200}),$(".wheels select").formSelect(),$(".tabs").tabs(),$(".collapsible").collapsible(),$(".show-skin").collapsible({onOpenStart:function(){var e=$(this)[0].$el;$.ajax({cache:!1,dataType:"json",type:"POST",data:{ajax:!0,target:e.data("game"),chassis:e.data("trailer"),lang:getCookie("lang")},beforeSend:function(){e.find(".collapsible-header").append(getPreloaderHtml("tiny"))},success:function(a){if("OK"===a.status){var t='<ul class="ac-list browser-default">';$.each(a.result,function(e,a){0!==e&&(t+="<li>"+a.name+"</li>")}),t+="</ul>",e.find(".collapsible-body").append(t)}},complete:function(){$(".preloader-wrapper").remove()}})},onCloseEnd:function(){$(this)[0].$el.find(".ac-list").remove()}}),$(".lang-btn").click(function(){setCookie("lang",$(this).data("lang"),{expires:31536e3})}),$("#select-chassis").uidropdown({fullTextSearch:!0,duration:300,placeholder:!1,forceSelection:!1,onChange:function(e,a,t){$("#accessory").hide().find(".ui.search").remove(),$("#paint").hide().find(".ui.search").remove(),$(".colors").hide(),$("#all_accessories, #all_paints").prop("checked",!1),$("[id^=dlc_]").prop("checked",!1).prop("disabled",!1),$("#generate-btn").attr("disabled",!0),""!==e&&($("#generate-btn").attr("disabled",!1),"schw_overweight"!==e&&-1===e.indexOf("goldhofer")?$(".wheels.input-field").show():($(".wheels.input-field").hide(),$(".wheels.input-field select").val("")),$.ajax({cache:!1,dataType:"json",type:"POST",data:{ajax:!0,target:$("input[name=target]").val(),chassis:e,lang:getCookie("lang")},beforeSend:function(){$("#chassis").after(getPreloaderHtml("small"))},success:function(e){"OK"===e.status&&$.each(e.result,function(a,t){var o=$('<select class="browser-default ui search dropdown '+a+'" name="'+a+'"></select>');$.each(t.echo,function(e,a){var t='<option value="'+a.value+'"';a.selected&&(t+=" selected"),t+=">"+a.name+"</option>",o.append(t)}),$("#"+a).show().find("label.for-select").after(o),o.uidropdown({fullTextSearch:!0,duration:300,placeholder:!1,forceSelection:!1,onChange:function(e,a,t){getDLCList(e),"default.sii"===(e=e.split("/"))[e.length-1]||"default"===e[e.length-1]?$(".colors").show():$(".colors").hide()}}),$.each(e.dlc,function(e,a){$("#dlc_"+a).prop("checked",!0).prop("disabled",!0)})})},complete:function(){$(".preloader-wrapper").remove()}}))}}),$("form").submit(function(){""===$("input[name=title]").val()&&$("input[name=title]").val($("select[name=chassis] option:selected").text().replace(/(\(.+|\s-\s.+)/,""))}),$("#all_accessories, #all_paints").change(function(){getDLCList(""),$(".colors").hide();var e=$(this).data("target");$.ajax({cache:!1,dataType:"json",type:"POST",data:{ajax:!0,target:$("input[name=target]").val(),all:$(this)[0].checked,select:e,chassis:$("select[name=chassis]").val(),lang:getCookie("lang")},beforeSend:function(){$("#"+$(this).data("target")+" h5").append(getPreloaderHtml("tiny"))},success:function(a){"OK"===a.status&&($.each(a.result,function(a,t){if(a===e){$("#"+a).find(".ui.search").remove();var o=$('<select class="browser-default ui search dropdown '+e+'" name="'+e+'"></select>');$.each(t.echo,function(e,a){var t='<option value="'+a.value+'"';a.selected&&(t+=" selected"),t+=">"+a.name+"</option>",o.append(t)}),$("#"+a).show().find("label.for-select").after(o),o.uidropdown({fullTextSearch:!0,duration:300,placeholder:!1,forceSelection:!1,onChange:function(e,a,t){getDLCList(e),showColors(e)}})}}),showColors($("#paint").find("select").val()))},complete:function(){$(".preloader-wrapper").remove()}})}),$(".colors input[type=color]").change(function(){var e=hexToRgb($(this).val()),a=rgbToScs(e.r,e.g,e.b);setColors($(this).val(),e,a)}),$("#color_hex").keyup(function(){var e=$(this).val();if(""!==e&&new RegExp("^#?[A-Fa-f0-9]{6}$").test(e)){var a=e.replace("#",""),t=hexToRgb(a);setColors("#"+a,t,rgbToScs(t.r,t.g,t.b))}}),$("#color_rgb_b, #color_rgb_g, #color_rgb_r").keyup(function(){var e=$(this).val().replace(/\D/g,"");if($(this).val(e),e=parseInt(e),!isNaN(e))if(e>255)$(this).val(255),$(this).trigger("keyup");else{var a={r:parseInt($("#color_rgb_r").val()),g:parseInt($("#color_rgb_g").val()),b:parseInt($("#color_rgb_b").val())};setColors(rgbToHex(a.r,a.g,a.b),a,rgbToScs(a.r,a.g,a.b))}}),$("#color_scs_b, #color_scs_g, #color_scs_r").keyup(function(){var e=$(this).val().replace(/,/g,".").replace(/\.+/g,".").replace(/[^\d|\.]/g,"");if($(this).val(e),e=parseFloat(e),!isNaN(e))if(e>1)$(this).val(1),$(this).trigger("keyup");else{var a={r:parseFloat($("#color_scs_r").val()),g:parseFloat($("#color_scs_g").val()),b:parseFloat($("#color_scs_b").val())},t={r:Math.round(255*Math.sqrt(a.r)),g:Math.round(255*Math.sqrt(a.g)),b:Math.round(255*Math.sqrt(a.b))},o=rgbToHex(t.r,t.g,t.b);$("#color_palette").val(o),$("#color_hex").val(o),$("#color_rgb_r").val(t.r),$("#color_rgb_g").val(t.g),$("#color_rgb_b").val(t.b)}}),$("#weight").keyup(function(){var e=$(this).val(),a=$(this).val();new RegExp("^d*$").test(e)||(a=e.replace(/\D/,""),$(this).val(a)),a.length>10&&$(this).val(a.substr(0,10))}),$("#image").change(function(){var e=window.URL||window.webkitURL;if(this.files[0].size>55e5)return alert($(this).data("size")),$(this).val(""),!1;var a,t,o=$(this).data("dimensions");(a=this.files[0])&&((t=new Image).src=e.createObjectURL(a),t.onload=function(){if(this.width>3e3||this.height>3e3)return alert(o),$("#image").val(""),$("#image-path").val(""),!1})})});